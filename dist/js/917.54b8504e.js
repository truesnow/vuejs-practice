"use strict";(self["webpackChunkvuejs_practice"]=self["webpackChunkvuejs_practice"]||[]).push([[917],{917:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4 col-md-offset-4 floating-box"},[e("Message",{attrs:{show:t.msgShow,type:t.msgType,msg:t.msg},on:{"update:show":function(e){t.msgShow=e}}}),e("div",{staticClass:"panel panel-default"},[t._m(0),e("div",{staticClass:"panel-body",attrs:{"data-validator-form":""}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("用户名")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator:input.required",value:{regex:/^[a-zA-Z]+\w*\s?\w*$/,error:"用户名要求以字母开头的单词字符"},expression:"{ regex: /^[a-zA-Z]+\\w*\\s?\\w*$/, error: '用户名要求以字母开头的单词字符' }",arg:"input",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("密码")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.password,expression:"password",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{regex:/^\w{6,16}$/,error:"密码要求 6 ~ 16 个单词字符"},expression:"{ regex: /^\\w{6,16}$/, error: '密码要求 6 ~ 16 个单词字符' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{id:"password",type:"password",placeholder:"请填写密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("确认密码")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.cpassword,expression:"cpassword",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{target:"#password"},expression:"{ target: '#password' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"password",placeholder:"请填写确认密码"},domProps:{value:t.cpassword},on:{input:function(e){e.target.composing||(t.cpassword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"control-label"},[t._v("图片验证码")]),e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.captcha,expression:"captcha",modifiers:{trim:!0}},{name:"validator",rawName:"v-validator.required",value:{title:"图片验证码"},expression:"{ title: '图片验证码' }",modifiers:{required:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"请填写验证码"},domProps:{value:t.captcha},on:{input:function(e){e.target.composing||(t.captcha=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"thumbnail",attrs:{title:"点击图片重新获取验证码"},on:{click:t.getCaptcha}},[e("div",{staticClass:"captcha vcenter",domProps:{innerHTML:t._s(t.captchaTpl)}})]),e("button",{staticClass:"btn btn-lg btn-success btn-block",attrs:{type:"submit"},on:{click:t.register}},[e("i",{staticClass:"fa fa-btn fa-sign-in"}),t._v(" 注册 ")])])])],1)])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"panel-heading"},[e("h3",{staticClass:"panel-title"},[t._v("请注册")])])}];function i(t=6,e="QWERTYUIOPLKJHGFDSAZXCVBNM1234567890"){let a="",s=[];try{s=[...Array(t)].map((()=>e[Math.floor(Math.random()*e.length)]))}catch(r){}return s.forEach((t=>{a+=`<span class="flex1 hcenter">${t}</span>`})),s=s.join(""),{tpl:a,captcha:s}}const o=localStorage;var l={setItem(t,e){o.setItem(t,JSON.stringify(e))},getItem(t){try{return JSON.parse(o.getItem(t))}catch(e){return null}},removeItem(t){o.removeItem(t)}},n={name:"Register",data(){return{captchaTpl:"",username:"",password:"",cpassword:"",captcha:"",msg:"",msgType:"",msgShow:!1}},created(){this.getCaptcha()},methods:{getCaptcha(){const{tpl:t,captcha:e}=i(6);this.captchaTpl=t,this.localCaptcha=e},register(t){setTimeout((()=>{this.$nextTick((()=>{const e="submit"===t.target.type?t.target:t.target.parentElement;e.canSubmit&&this.submit()}))}),100)},submit(){if(this.captcha.toUpperCase()!==this.localCaptcha)this.showMsg("验证码不正确"),this.getCaptcha();else{const t={name:this.username,password:this.password,avatar:`https://api.adorable.io/avatars/200/${this.username}.png`},e=l.getItem("user");e&&e.name===t.name?this.showMsg("用户名已存在"):this.login(t)}},login(t){l.setItem("user",t),this.showMsg("注册成功","success")},showMsg(t,e="warning"){this.msg=t,this.msgType=e,this.msgShow=!1,this.$nextTick((()=>{this.msgShow=!0}))}}},c=n,p=a(1),m=(0,p.Z)(c,s,r,!1,null,"b6082ee4",null),u=m.exports}}]);
//# sourceMappingURL=917.54b8504e.js.map